<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MARKET WIZ</title>

    <!-- 퍼블용 include: 개발팀에서 재include 하길 바랍니다. -->
    <script class="__include" src="../include/head.js"></script>
  </head>
  <body class="market">
    <!-- header -->
    <header data-include="../layout/header.html"></header>

    <!-- container -->
    <div class="container">
      <!-- lnb -->
      <div class="lnb" data-include="../layout/lnb.html"></div>

      <!-- contents -->
      <div class="contents">
        <div class="tab-line-menu ui-tab">
          <div class="tab-inner">
            <i class="tab-line" aria-hidden="true"></i>
            <ul class="tab-list">
              <li class="tab"><a href="#dashboard">대시보드</a></li>
            </ul>
          </div>
        </div>
        <div class="tab-panels">
          <!-- .tab-panels 영역 없어도 됨(전환될때 인터렉션용) -->
          <div id="dashboard" class="tab-panel">텝메뉴1텝메뉴1</div>
          <div id="collect-site-product" class="tab-panel">
            텝메뉴2텝메뉴2<br />텝메뉴2텝메뉴2<br />텝메뉴2텝메뉴2<br />텝메뉴2텝메뉴2
          </div>
          <div id="collect-my-product" class="tab-panel">텝메뉴3텝메뉴3</div>
          <div id="waiting-product" class="tab-panel">텝메뉴4텝메뉴4</div>
        </div>
      </div>
    </div>
    <!-- footer -->
    <footer data-include="../layout/footer.html"></footer>
    <script>
      // $(".folding-panel li").each(function () {
      //   $(this).click(function () {
      //     const tab_name = $(this).text();
      //     const data_name = $(this).data("name");
      //     $(".tab-list").append(
      //       '<li class="tab"><a href="#' +
      //         data_name +
      //         '">' +
      //         tab_name +
      //         "</a><span class=" +
      //         "close-tab" +
      //         ">닫기</span></li>"
      //     );
      //   });
      // });

      $(".tab-list").on("click", "a", function () {
        $(".tab-panels .tab-panel").removeClass("active");
      });

      $(".tab-list").on("click", ".close-tab", function () {
        const activeTab = $(".tab.active").find("a").attr("href");
        const activePanel = "#" + $(".tab-panels .tab-panel.active").attr("id");
        if (activeTab != activePanel) {
          $(".tab-panels .tab-panel").removeClass("active");
        }
        $(this).parents("li").remove();
      });

      $(".market").on("click", ".folding-panel li", function () {
        const tab_name = $(this).text();
        const data_name = $(this).data("name");
        $(".tab-list").append(
          '<li class="tab"><a href="#' + data_name + '">' + tab_name + '</a><span class="close-tab">닫기</span></li>'
        );
      });

      $(".market").on("click", ".folding-btn", function () {
        $(this).parent().next(".folding-panel").stop().slideToggle(300);
        $(this).parents("li").toggleClass("open").siblings().removeClass("open");
        $(this).parents("li").siblings().find(".folding-panel").slideUp(300); // 1개씩 펼치기
      });
    </script>
  </body>
</html>
